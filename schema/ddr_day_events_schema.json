{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "DDR Day Event Schema",
  "description": "Schema for structured extraction of Daily Drilling Report (DDR) Operations rows into machine-readable JSONL events.",
  "type": "object",
  "required": [
    "wellbore",
    "report_date",
    "start_time",
    "end_time",
    "activity_raw",
    "state",
    "remark"
  ],
  "properties": {
    "wellbore": {
      "type": "string",
      "description": "Wellbore name as stated in the DDR header (preferred) or best-effort derived from filename."
    },
    "report_date": {
      "type": "string",
      "description": "Nominal report date derived from DDR filename (YYYY-MM-DD). This is the authoritative day label for the event set.",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
    },
    "period_start_date": {
      "type": ["string", "null"],
      "description": "Period start date extracted from DDR header (YYYY-MM-DD), if present.",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
    },
    "period_end_date": {
      "type": ["string", "null"],
      "description": "Period end date extracted from DDR header (YYYY-MM-DD), if present.",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
    },
    "start_time": {
      "type": "string",
      "pattern": "^\\d{2}:\\d{2}$",
      "description": "Start time of the operation block in HH:MM."
    },
    "end_time": {
      "type": "string",
      "pattern": "^\\d{2}:\\d{2}$",
      "description": "End time of the operation block in HH:MM. May be 00:00 for rollover."
    },
    "activity_raw": {
      "type": "string",
      "description": "Original activity classification from DDR (e.g., 'drilling -- trip', 'workover -- wire line')."
    },
    "state": {
      "type": "string",
      "description": "Reported state for the operation row (commonly 'ok')."
    },
    "remark": {
      "type": "string",
      "description": "Narrative engineering remark describing the operation."
    },
    "end_depth_md": {
      "type": ["string", "null"],
      "description": "End depth (mMD) from the DDR Operations table if present; otherwise null."
    },
    "event_type": {
      "type": ["string", "null"],
      "description": "Normalized event type from controlled vocabulary (see schema/event_type_vocabulary.md). May be null for raw extraction outputs."
    },
    "source_file": {
      "type": ["string", "null"],
      "description": "Original DDR HTML filename."
    }
  }
}
